///////////////////////////////////////////////////////////////
// Created: 23.09.2025
// Author: NS_Deathman
///////////////////////////////////////////////////////////////
//  /\_/\
// ( -.- )
//  | | |
///////////////////////////////////////////////////////////////
#pragma once
#include "render_backend_factory.h"
#include "render_backend_buffer_types.h"
#include "window_implementation.h"
///////////////////////////////////////////////////////////////
namespace Render
{
	class CORE_API CRender
	{
		public:
		struct Config
		{
			uint32_t Width = 800;
			uint32_t Height = 600;
			GraphicsAPI GraphicsAPI = GraphicsAPI::DirectX9;
		};

		CRender();
		~CRender();

		// Основной интерфейс
		bool Initialize(const Config& config);
		void Shutdown();
		void Resize(uint32_t width, uint32_t height);

		// Рендеринг
		void BeginFrame();
		void EndFrame();
		void Present();

		// Информация
		GraphicsAPI GetCurrentAPI() const
		{
			return m_CurrentAPI;
		}
		std::string GetAPIName() const
		{
			return BackendFactory::APIToString(m_CurrentAPI);
		}

		// Доступ к бэкенду (осторожно!)
		IRenderBackend* GetBackend()
		{
			return m_Backend.get();
		}

		private:
		std::unique_ptr<IRenderBackend> m_Backend;
		GraphicsAPI m_CurrentAPI;
		Config m_Config;

		Core::CWindow m_Window;

		bool CreateBackend();
	};
} // namespace Render
///////////////////////////////////////////////////////////////
/*
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠰⡖⠒⠲⠶⢤⣤⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⢀⣀⣀⣀⣀⢀⣀⣀⣀⠀⠀⠀⠀⠀⠀⠀⢷⡀⠀⠀⠀⠀⠉⠙⢷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⣀⣀⣤⣄⠀
⠀⣰⡿⠟⠛⠋⠉⠉⠉⠉⠉⠉⠙⠛⠛⠛⠻⠶⣶⣦⣤⣿⣦⡀⠀⠀⠀⠀⠈⠻⣦⣀⢀⣀⣀⣤⣴⠶⠾⠿⠟⠛⠛⠉⠉⠙⡇
⣸⣏⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣶⠾⠛⠋⠁⢀⡀⠀⠀⠀⠀⠀⠀⠉⠛⠛⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⡇
⠘⢿⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⠛⠛⠛⠉⠉⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡟⠀
⠀⠘⣿⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⡿⠁⠀
⠀⠀⠈⠻⣦⠀⠀⠀⠀⠀⠀⠀⠀⢀⣴⡶⠾⠷⣶⠀⠀⠀⠀⠀⠀⠀⠀⢠⣾⡟⠛⠻⢶⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⠟⠀⠀⠀
⠀⠀⠀⠀⠘⠷⣤⡀⠀⠀⠀⠀⣰⡿⠋⢀⣴⡟⠛⣧⠀⠀⠀⠀⠀⠀⠀⠈⣱⡟⠻⣦⠀⠙⢷⣄⠀⠀⠀⠀⠀⠀⠀⢀⣾⠋⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠈⠿⣶⣄⠀⣼⡟⠂⠀⢸⡟⠀⠀⢸⡇⠀⠀⠀⠀⠀⠀⠀⣿⠀⠀⠸⡇⠀⠀⢻⣆⠀⠀⠀⢀⣀⣶⣟⠁⠀⠀⠀⠀⠀
⠀⠀⠀⢺⣟⠒⠶⠶⣤⡄⠀⣿⠀⠀⠀⢺⡇⠀⠀⢸⡇⠀⠀⠀⠀⠀⠀⠈⢿⡄⠀⢠⣷⠀⠀⠀⢻⡜⠛⠛⠉⠉⠉⣽⠇⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠙⠷⣤⡀⠀⠀⠀⣿⡀⠀⠀⠀⢻⣄⣠⡟⠀⠀⠀⠀⠀⠀⠀⠀⠘⠷⣤⡾⠁⠀⠀⠀⢸⡇⠀⠀⠀⣠⡾⠃⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠉⢻⡇⠀⢀⣈⡀⠀⠀⠀⠀⠉⠉⠀⠀⠚⠚⠛⠂⠀⠀⠀⠀⠀⠀⠀⠀⢀⣠⠀⣀⡀⠀⢰⣞⠉⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⣾⠁⠛⠋⠿⠷⠀⠀⠀⠀⠀⠀⠀⢀⠀⣀⣀⣀⡀⣠⡀⠀⠀⠀⠀⠘⠻⠿⠿⠉⠀⠀⠀⠙⢿⡄⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⢸⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠛⠛⢿⣌⠉⠉⢹⡇⠀⠀⠀⠀⠀⠀⠀⢀⣄⣀⣀⣀⣀⣀⣿⡄⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠘⠛⠛⠛⠋⠙⠻⣦⣤⣀⣀⠀⠀⠀⠀⠀⠀⠙⢷⣤⣼⠃⠀⠀⢀⣀⣠⣤⡶⠟⠋⠉⠋⠉⠉⠉⠉⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠻⣟⠛⠛⠛⠛⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⢿⣏⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⠻⣶⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠻⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣴⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢹⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⢶⡶⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢻⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
*/
///////////////////////////////////////////////////////////////
