///////////////////////////////////////////////////////////////////////////////////
// Created: 05.01.2025
// Author: NS_Deathman
// Optick profiling implementation
///////////////////////////////////////////////////////////////////////////////////
#pragma once
///////////////////////////////////////////////////////////////////////////////////
#include <optick/optick.h>
///////////////////////////////////////////////////////////////////////////////////
#ifdef DEBUG_BUILD
#pragma comment(lib, "OptickCore.lib")
#endif
///////////////////////////////////////////////////////////////////////////////////
class COptickAPI
{
  private:
	int m_frames_to_capture;
	int m_start_capture_frame;
	int m_end_capture_frame;

	bool m_need_capture;
	bool m_switched_to_capturing;

  public:
	void Initialize();
	void Destroy();

	void OnFrame();
	void StartCapturing();
	void StartCapturing(int frames_to_capture);
	void StopCapturing();
	void SaveCapturedFrames();
	void TryToSaveCapture(std::string save_path);
	void SaveCapture(std::string save_path);

	void SwitchProfiler();
	void SwitchToCapturing();
	void SwitchToSaving();
};
///////////////////////////////////////////////////////////////////////////////////
extern COptickAPI* OptickAPI;
///////////////////////////////////////////////////////////////////////////////////